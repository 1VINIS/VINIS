// قائمة المعرفات المسموح لها (يمكنك زيادتها)
const AUTHORIZED_KEYS = [
    "1552270035",
    "1552401363",
    "1553061229",
    "1553164639",
    "1552606071",
    "1553173129",
    "1553147807",
    "1553079875",
    "1552884833",
    "1553173129",
    "1553160237",
    "1552770865",
    "1553131515",
    "1552600703",
    "1553139813",
    "1553001915",
    "1552869489",
    "1553113851",
    "1552470221",
    "1552575591",
    "1553129537",
    "1552805189",
    "1552544755",
    "1553055667",
    "1552610125",
    "1553095957",
    "1552684181",
    "1552418159",
    "1553049259",
    "1552732307",
    "1553123151",
    "1552791165",
    "1552770147",
    "1552171933",
    "1553107215",
    "1553053313",
    "1552849271",
    "1552777943",
    "1552201997",
    "1552601203",
    "1552555497",
    "1552792651",
    "1552390125",
    "1552592777",
    "1552835151",
    "1552600339",
    "1552703695",
    "1552855723",
    "1552838891",
    "1552201997",
    "1552569765",
    "1552599833",
    "1552413447",
    "1552555497",
    "1552715395",
    "1552559777",
    "1552497113",
    "1552489431",
    "1552412597",
    "1552119195",
    "1552818871",
    "1552565139",
    "1552201997",
    "1552532447",
    "1552201997",
    "1552446919",
    "1552523967",
    "1552532363",
    "1552493133",
    "1552307341",
    "1552555497",
    "1552485209",
    "1552551549",
    "1552529459",
    "1552488891",
    "1552441103",
    "1552456679",
    "1552470299",
    "1552423287",
    "1551905651",
    "1552503609",
    "1552489215",
    "1552532447",
    "1552464431",
    "1552422345",
    "1552438711",
    "1384190675",
    "1551619819",
    "1552307341",
    "1552517209",
    "1552482393",
    "1552237553",
    "1552436573",
    "1551739981",
    "1552447217",
    "1552292117",
    "1552354771",
    "1552430277",
    "1552391533",
    "1552351039",
    "1552408295",
    "1552391975",
    "1552075457",
    "1552447053",
    "1552394687",
    "1552384709",
    "1552185011",
    "1552437301",
    "1552351019",
    "1552282821",
    "1552330043",
    "1552253145",
    "1552359113",
    "1552370059",
    "1550612647",
    "1552204665",
    "1552149969",
    "1552338499",
    "1552260003",
    "1552330771",
    "1552260229",
    "1552180039",
    "1552375429",
    "1552229393",
    "1552139459",
    "1552323055",
    "1552174063",
    "1552022583",
    "1552333881",
    "1552255787",
    "1552293061",
    "1552285553",
    "1552046203",
    "1551658549",
    "1552081679",
    "1552247439",
    "1552248369",
    "1551698751",
    "1552162433",
    "1552305283",
    "1552180039",
    "1552189517",
    "1552161563",
    "1552027437",
    "1552183907",
    "1546229081",
    "1552264667",
    "1552179611",
    "1552172943",
    "1552145827",
    "1551999383",
    "1552152213",
    "1552185173",
    "1551841565",
    "1552146803",
    "1551969845",
    "1552163425",
    "1552052405",
    "1552133343",
    "1552170691",
    "1551701173",
    "1551909845",
    "1552168561",
    "1551591257",
    "1551676089",
    "1552179693",
    "1551651127",
    "1552062857",
    "1551839013",
    "1551565291",
    "1551719273",
    "1552085127",
    "1551749259",
    "1552102689",
    "1552012295",
    "1545725305",
    "1551698679",
    "1551872439",
    "1551665105",
    "1550974647",
    "1551672589",
    "1551679113",
    "1551518749",
    "1551660655",
    "1551526373",
    "1551619819",
    "1551605679",
    "1551534329",
    "1551594701",
    "1551580027",
    "1551561869",
    "1551685699",
    "1551676089",
    "1551544031",
    "1551542295",
    "1551233795",
    "1551582189",
    "1551557065",
    "1551156887",
    "1551368521",
    "1551393131",
    "1551485689",
    "1551537463",
    "1551559111",
    "1551508073",
    "1551522133",
    "1551507153",
    "1551524841",
    "1551508483",
    "1551488347",
    "1551103177",
    "1551466501",
    "1551405645",
    "1512393369",
    "1551373513",
    "1551452239",
    "1551388527",
    "1551419517",
    "1551422737",
    "1551396693",
    "1551152839",
    "1551398959",
    "1551412803",
    "1550610703",
    "1551337575",
    "1551377227",
    "1551293263",
    "1551295275",
    "1551278383",
    "1551277159",
    "1551292033",
    "1551190227",
    "1551287751",
    "1551216327",
    "1551251789",
    "1551216909",
    "1551208903",
    "1551271193",
    "1551212885",
    "1550345819",
    "1551190227",
    "1551161629",
    "1551068123",
    "1551189821",
    "1551155169",
    "1549172925",
    "1551119235",
    "1551127863",
    "1551142543",
    "1551096229",
    "1551162393",
    "1551098689",
    "1550227745",
    "1550356141",
    "1551103035",
    "1550565301",
    "1551060447",
    "1551037659",
    "1551020257",
    "1550930417",
    "1551014877",
    "1551011545",
    "1550572043",
    "1550408083",
    "1550845947",
    "1550998641",
    "1550949763",
    "1550967043",
    "1548171313",
    "1550548727",
    "1550568889",
    "1550476354",
    "1550395101",
    "1550487841",
    "1548284227",
    "1550528961",
    "1550463129",
    "1550382783",
    "1550227745",
    "1550404589",
    "1550399813",
    "1549989499",
    "1550101789",
    "1550187585",
    "1550128487",
    "1550388251",
    "1550294063",
    "1550353911",
    "1548624351",
    "1550376185",
    "1550361825",
    "1550289973",
    "1550375229",
    "1549322635",
    "1550284301",
    "1550328889",
    "1550319135",
    "1550184417",
    "1550356119",
    "1550304757",
    "1550129183",
    "1550284301",
    "1550268855",
    "1550206717",
    "1550194451",
    "1550085395",
    "1550235975",
    "1548771895",
    "1550020669",
    "1550260635",
    "1550142419",
    "1550154131",
    "1550191849",
    "1550026843",
    "1549296807",
    "1549988999",
    "1550047461",
    "1549977867",
    "1550151587",
    "1550154883",
    "1550223047",
    "1550070181",
    "1548887975",
    "1550018577",
    "1550070891",
    "1550039893",
    "1549918433",
    "1550032685",
    "1549937787",
    "1550028735",
    "1549989661",
    "1550008413",
    "1549907671",
    "1160930611",
    "1549942975",
    "1549375885",
    "1549354205",
    "1549529511",
    "1549732197",
    "1549856995",
    "1549514493",
    "1549452735",
    "1549902747",
    "1549423221",
    "1549391723",
    "1549417035",
    "1547762449",
    "1549312711",
    "1549401559",
    "1550014041",
    "1549397409",
    "1549413167",
    "1547758255",
    "1549433271",
    "1549170749",
    "1549402757",
    "1549432665",
    "1549446575",
    "1549561359",
    "1549311197",
    "1549255787",
    "1549223531",
    "1549253765",
    "1549240069",
    "1549287739",
    "1548269759",
    "1549329381",
    "1548709901",
    "1547047353",
    "1549370199",
    "1549109193",
    "1549106565",
    "1548587643",
    "1549126391",
    "1548946975",
    "1549135207",
    "1549055357",
    "1549064733",
    "1548980293",
    "1548953437",
    "1549101765",
    "1549097131",
    "1549030247",
    "1548824697",
    "1548893885",
    "1548987729",
    "1549008959",
    "1548942661",
    "1546260521",
    "1549015925",
    "1548905301",
    "1548921811",
    "1548910749",
    "1548797445",
    "1547887339",
    "1548826327",
    "1548599969",
    "1548844783",
    "1548909875",
    "1548918661",
    "1548247669",
    "1548600847",
    "1548248821",
    "1548822983",
    "1548663923",
    "1548798565",
    "1548242571",
    "1548815971",
    "1548841679",
    "1548748085",
    "1548805581",
    "1548783375",
    "1548789999",
    "1548732517",
    "1542188867",
    "1548020453",
    "1548301151",
    "1548347549",
    "1548715151",
    "1548642475",
    "1547918139",
    "1548197335",
    "1548250113",
    "1547862235",
    "1548607623",
    "1548636117",
    "1548065285",
    "1548582937",
    "1548581341",
    "1548604161",
    "1548303573",
    "1548260723",
    "1548635405",
    "1508041039",
    "1548028041",
    "1548578795",
    "1548291405",
    "1548235047",
    "1548300469",
    "1547948349",
    "1548267755",
    "1548259591",
    "1546339389",
    "1546337899",
    "1546569203",
    "1546545267",
    "1546413237",
    "1546565855",
    "1546524035",
    "1545763805",
    "1546286617",
    "1546529643",
    "1546503137",
    "1545662773",
    "1546271359",
    "1546529165",
    "1545656313",
    "1545647467",
    "1546276805",
    "1545653585",
    "1546407617",
    "1546411789",
    "1546435923",
    "1546413155",
    "1537348743",
    "1546483579",
    "1546248707",
    "1546322129",
    "1546297743",
    "1546242699",
    "1546209585",
    "1545769725",
    "1546231287",
    "1546277899",
    "1546218459",
    "1546238775",
    "1546159189",
    "1546221729",
    "1546146175",
    "1546256335",
    "1546161193",
    "1546121577",
    "1546201627",
    "1546215593",
    "1545657187",
    "1545628487",
    "1546132983",
    "1546188265",
    "1545675885",
    "1546117927",
    "1543938121",
    "1546125681",
    "1546056131",
    "1546083605",
    "1545661731",
    "1546023491",
    "1545670149",
    "1546055919",
    "1546022673",
    "1546090089",
    "1546051497",
    "1546011669",
    "1545675695",
    "1545665213",
    "1545691541",
    "1545686619",
    "1545689959",
    "1545660791",
    "1545699275",
    "1545702685",
    "1545691627",
    "1545708061",
    "1545711535",
    "1545704445",
    "1545735237",
    "1545725775",
    "1545757863",
    "1545751023",
    "1545753341",
    "1545762037",
    "1545764629",
    "1546124597",
    "1545712619",
    "1545650063",
    "1545989379",
    "1546014769",
];

function limitInput(el) {
    if(el.value.length > 10) el.value = el.value.slice(0, 10);
    document.getElementById('char-count').innerText = el.value.length + "/10";
}

function initiateAuth() {
    const idVal = document.getElementById('id-field').value;
    
    if(idVal.length !== 10) {
        alert("خطأ: يرجى إدخال المعرف المكون من 10 أرقام كاملاً.");
        return;
    }

    // إظهار نافذة التحليل
    const modal = document.getElementById('processingModal');
    modal.style.display = 'flex';
    
    runSimulation(idVal);
}

async function runSimulation(id) {
    const logs = [
        "> جاري الاتصال بسيرفر VINIS_CORE...",
        "> تشفير المعرف البيومتري...",
        "> فحص الصلاحيات الأمنية...",
        "> جاري مطابقة المفتاح الرقمي...",
        "> استجابة السيرفر: تم التحقق."
    ];
    
    const logBox = document.getElementById('logStream');
    const pFill = document.getElementById('pFill');
    
    for(let i = 0; i < logs.length; i++) {
        let p = document.createElement('div');
        p.innerText = logs[i];
        logBox.appendChild(p);
        
        // تحريك الـ Progress Bar
        pFill.style.width = ((i + 1) * 20) + "%";
        
        await new Promise(r => setTimeout(r, 700));
    }

    // التحقق النهائي
    setTimeout(() => {
        if(AUTHORIZED_KEYS.includes(id)) {
            window.location.href = "results.html";
        } else {
            document.getElementById('processingModal').style.display = 'none';
            document.getElementById('errorModal').style.display = 'flex';
        }
    }, 500);
}

function closeModals() {
    document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');
    document.getElementById('logStream').innerHTML = "";
    document.getElementById('pFill').style.width = "0%";
}

// إنشاء خلفية "الأكواد" عشوائياً
function createCodeRain() {
    const rain = document.getElementById('codeRain');
    for(let i = 0; i < 50; i++) {
        let span = document.createElement('span');
        span.style.position = 'absolute';
        span.style.left = Math.random() * 100 + "vw";
        span.style.top = Math.random() * 100 + "vh";
        span.innerText = Math.random().toString(36).substring(2, 15);
        rain.appendChild(span);
    }
}

createCodeRain();



















































